---
title: "Reporte estadística ERGOSTATS"
subtitle: "Número 1: Muestras complejas"
author: 
    - "Alex Bajaña"
    - "Andrea Díaz"
date: "2022-08-18"
output: 
  html_document:
    toc: true
    toc_float: true
    includes:
       in_header: headr.html
---

<style>
body {
text-align: justify}
</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,message = FALSE)
```

## Muestras complejas con R

Usando la librería `srvyr`, donde, básicamente, en vez de tener que especificar en cada estimación las variables de peso o, en su caso, las correspondientes a cada uno de los conglomerados  o UPM´s, la librería survey, ligado a un objeto de datos, declara inicialmente las características técnicas de la encuesta. Entonces, se debe especificar las variables de estratos, conglomerados y pesos, para que, una vez el paquete reconozca reconoce a la encuesta, se pueden utilizar cualquiera de las técnicas de análisis y modelización que nos proporciona el paquete sin necesidad de reespecificar la parte técnica.

## Ejemplo de uso:

```{r}

library(survey)
library(srvyr)
library(tidyverse)
data(api)

# stratified sample
dstrata <- apistrat %>%
  as_survey_design(strata = stype, weights = pw)

# one-stage cluster sample
dclus1 <- apiclus1 %>%
  as_survey_design(dnum, weights = pw, fpc = fpc)

class(dclus1)


```
